<!DOCTYPE html>

<html>

<head>

 <title>Шум Перлина</title>

 <meta name="viewport" content="width=device-width, initial-scale=1">

 <style>

  #noise {

   width: 100%;

   height: 100vh;

   background-color: black;

   position: fixed;

   top: 0;

   left: 0;

   z-index: -1;

  }

 </style>

</head>

<body>

 <div id="noise"></div>

 <div>

  <h1>Шум Перлина</h1>

  <label for="period">Период обновления (в секундах):</label>

  <input type="number" id="period" name="period" min="1" max="60" value="5">

  <br>

  <label for="octaves">Количество октав:</label>

  <input type="number" id="octaves" name="octaves" min="1" max="10" value="4">

  <br>

  <label for="persistence">Стойкость:</label>

  <input type="number" id="persistence" name="persistence" min="0" max="1" step="0.05" value="0.5">

  <br>

  <label for="lacunarity">Лакунарность:</label>

  <input type="number" id="lacunarity" name="lacunarity" min="1" max="10" step="0.5" value="2">

  <br>

  <button onclick="generateNoise()">Обновить шум</button>

 </div>

 <script>

  // Функция для генерации шума Перлина

  function generateNoise() {

   const canvas = document.createElement('canvas');

   canvas.width = window.innerWidth;

   canvas.height = window.innerHeight;

   const ctx = canvas.getContext('2d');

   const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

   const data = imageData.data;

   const period = document.getElementById('period').value;

   const octaves = document.getElementById('octaves').value;

   const persistence = document.getElementById('persistence').value;

   const lacunarity = document.getElementById('lacunarity').value;

   const noise = new SimplexNoise();

   for (let x = 0; x < canvas.width; x++) {

    for (let y = 0; y < canvas.height; y++) {

     let value = 0;

     let amplitude = 1;

     let frequency = 1;

     for (let i = 0; i < octaves; i++) {

      value += noise.noise2D(x / period * frequency, y / period * frequency) * amplitude;

      amplitude *= persistence;

      frequency *= lacunarity;

     }

     const index = (x + y * canvas.width) * 4;

     data[index] = value * 255;

     data[index + 1] = value * 255;

     data[index + 2] = value * 255;

     data[index + 3] = 255;

    }

   }

   ctx.putImageData(imageData, 0, 0);

   document.getElementById('noise').style.backgroundImage = `url(${canvas.toDataURL()})`;

  }

  generateNoise();

 </script>

</body>

</html>
