<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>MrGorty Web Game Application</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .object-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            padding: 20px;
        }
        .object {
            width: calc(33.33% - 20px);
            margin-bottom: 20px;
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        .object:hover {
            box-shadow: 0 0 5px #ccc;
        }
        .object-icon {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background-size: contain;
            background-repeat: no-repeat;
        }
        .object-name {
            font-size: 20px;
            font-weight: bold;
            margin-left: 80px;
            margin-bottom: 10px;
        }
        .object-description {
            margin-left: 80px;
            margin-bottom: 10px;
        }
        .object-type {
            margin-left: 80px;
            margin-bottom: 10px;
        }
        .object-class {
            margin-left: 80px;
            margin-bottom: 10px;
        }
        .attribute {
            display: inline-block;
            margin-right: 10px;
            margin-bottom: 10px;
            padding: 5px;
            background-color: #ccc;
            border-radius: 5px;
        }
        .attribute-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            background-size: contain;
            background-repeat: no-repeat;
        }
        .filter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .filter-label {
            font-size: 16px;
            font-weight: bold;
            margin-right: 10px;
        }
        .filter-select {
            font-size: 16px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <div class="filter">
        <label class="filter-label" for="class-select">Показать объекты класса:</label>
        <select id="class-select" class="filter-select">
            <option value="">Все</option>
        </select>
    </div>
    <div class="object-list"></div>
    <script>
        const objectListElement = document.querySelector('.object-list');
        const classSelectElement = document.querySelector('#class-select');

        fetch('./res/objects.yaml')
            .then(response => response.text())
            .then(yaml => {
                const objects = jsyaml.safeLoad(yaml);
                const classes = new Set();
                const types = new Set();
                const attributes = new Map();

                for (const [id, objectData] of Object.entries(objects)) {
                    const objectElement = document.createElement('div');
                    objectElement.classList.add('object');

                    const objectIconElement = document.createElement('div');
                    objectIconElement.classList.add('object-icon');
                    objectIconElement.style.backgroundImage = `url('./icons/objects/${id}.png')`;

                    const objectNameElement = document.createElement('div');
                    objectNameElement.classList.add('object-name');
                    objectNameElement.textContent = objectData.name;

                    const objectDescriptionElement = document.createElement('div');
                    objectDescriptionElement.classList.add('object-description');
                    objectDescriptionElement.textContent = objectData.description;

                    const objectTypeElement = document.createElement('div');
                    objectTypeElement.classList.add('object-type');
                    objectTypeElement.textContent = `Тип: ${objectData.type}`;

                    const objectClassElement = document.createElement('div');
                    objectClassElement.classList.add('object-class');
                    objectClassElement.textContent = `Класс: ${objectData.class}`;

                    const attributesElement = document.createElement('div');
                    attributesElement.classList.add('attributes');

                    for (const attribute of objectData.attributes) {
                        const attributeElement = document.createElement('div');
                        attributeElement.classList.add('attribute');

                        const attributeIconElement = document.createElement('div');
                        attributeIconElement.classList.add('attribute-icon');
                        attributeIconElement.style.backgroundImage = `url('./icons/attributes/${attribute}.png')`;

                        const attributeNameElement = document.createElement('span');
                        attributeNameElement.textContent = attribute;

                        attributeElement.appendChild(attributeIconElement);
                        attributeElement.appendChild(attributeNameElement);
                        attributesElement.appendChild(attributeElement);

                        attributes.set(attribute, attributeElement);
                    }

                    objectElement.appendChild(objectIconElement);
                    objectElement.appendChild(objectNameElement);
                    objectElement.appendChild(objectDescriptionElement);
                    objectElement.appendChild(objectTypeElement);
                    objectElement.appendChild(objectClassElement);
                    objectElement.appendChild(attributesElement);

                    objectListElement.appendChild(objectElement);

                    classes.add(objectData.class);
                    types.add(objectData.type);
                }

                for (const objectClass of classes) {
                    const optionElement = document.createElement('option');
                    optionElement.value = objectClass;
                    optionElement.textContent = objectClass;
                    classSelectElement.appendChild(optionElement);
                }

                classSelectElement.addEventListener('change', () => {
                    const selectedClass = classSelectElement.value;

                    for (const [id, objectData] of Object.entries(objects)) {
                        const objectElement = objectListElement.querySelector(`[data-id="${id}"]`);

                        if (selectedClass && objectData.class !== selectedClass) {
                            objectElement.style.display = 'none';
                        } else {
                            objectElement.style.display = 'block';
                        }
                    }
                });
            });
    </script>
</body>
</html>
